package typescript

import (
	"fmt"
	"os"
)

var fileHeader = `// Code generated by the gen package. DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***`

type TypeScriptFile struct {
	Name     string
	Contents string
}

func (t TypeScriptFile) Write() error {
	contents := fmt.Sprintf("%s\n\n%s", fileHeader, t.Contents)
	err := os.WriteFile(t.Name, []byte(contents), 0644)
	if err != nil {
		return fmt.Errorf("writing file [%s]: %v", t.Name, err)
	}
	return nil
}

func NewTypeScriptFile(
	name string,
	contents string,
) TypeScriptFile {
	return TypeScriptFile{
		Name:     name,
		Contents: contents,
	}
}
