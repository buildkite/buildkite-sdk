{
    "targets": {
        "install:all": {
            "dependsOn": [
                "app-typescript:install",
                "app-python:install",
                "app-go:install",
                "app-ruby:install",
                "sdk-typescript:install",
                "sdk-python:install",
                "sdk-go:install",
                "sdk-ruby:install",
                "infra:install"
            ]
        },
        "clean:all": {
            "executor": "nx:run-commands",
            "options": {
                "commands": [
                    "rimraf dist",
                    "rimraf out",
                    "rimraf tmp",
                    "rimraf coverage",
                    "rimraf reports"
                ]
            },
            "dependsOn": [
                "app-typescript:clean",
                "app-python:clean",
                "app-go:clean",
                "app-ruby:clean",
                "sdk-typescript:clean",
                "sdk-python:clean",
                "sdk-go:clean",
                "sdk-ruby:clean"
            ]
        },
        "format:all": {
            "executor": "nx:run-commands",
            "options": {
                "commands": []
            },
            "dependsOn": [
                "sdk-typescript:format",
                "sdk-python:format",
                "sdk-go:format",
                "sdk-ruby:format",
                "infra:format"
            ]
        },
        "gen:build": {
            "executor": "nx:run-commands",
            "options": {
                "commands": [
                    "cd internal/gen && go build -o type-gen",
                    "chmod +x internal/gen/type-gen"
                ],
                "parallel": false
            }
        },
        "gen:types-ruby": {
            "executor": "nx:run-commands",
            "options": {
                "commands": [
                    "echo 'Ruby type generation not implemented'",
                    "exit 0"
                ],
                "parallel": false
            }
        },
        "gen:types-go": {
            "executor": "nx:run-commands",
            "options": {
                "commands": [
                    "rm -rf sdk/go/sdk/buildkite",
                    "mkdir sdk/go/sdk/buildkite",
                    "go install golang.org/x/tools/cmd/goimports@latest",
                    "export PATH=\"$HOME/go/bin:$PATH\"",
                    "./internal/gen/type-gen go sdk/go/sdk/buildkite",
                    "goimports -w ./sdk/go/sdk/buildkite",
                    "gofmt ./sdk/go/sdk/buildkite"
                ],
                "parallel": false
            }
        },
        "gen:types-python": {
            "executor": "nx:run-commands",
            "options": {
                "commands": [
                    "rm -rf sdk/python/src/buildkite_sdk/schema.py",
                    "touch sdk/python/src/buildkite_sdk/schema.py",
                    "curl -o sdk/python/src/buildkite_sdk/schema.json https://raw.githubusercontent.com/buildkite/pipeline-schema/refs/heads/main/schema.json",
                    "./internal/gen/type-gen py sdk/python/src/buildkite_sdk",
                    "npx nx run sdk-python:format"
                ],
                "parallel": false
            }
        },
        "gen:types-typescript": {
            "executor": "nx:run-commands",
            "options": {
                "commands": [
                    "rm -rf sdk/typescript/src/types",
                    "mkdir sdk/typescript/src/types",
                    "./internal/gen/type-gen ts sdk/typescript/src/types",
                    "npx prettier --write ./sdk/typescript/src/types/schema.ts"
                ],
                "parallel": false
            }
        },
        "gen:types": {
            "dependsOn": [
                "gen:build",
                "gen:types-typescript",
                "gen:types-python",
                "gen:types-go"
            ]
        },
        "gen:pipeline": {
            "executor": "nx:run-commands",
            "options": {
                "commands": []
            },
            "dependsOn": ["ci:run:pipeline"]
        },
        "gen:pipeline-release": {
            "executor": "nx:run-commands",
            "options": {
                "commands": []
            },
            "dependsOn": ["ci:run:release-pipeline"]
        },
        "build:all": {
            "dependsOn": [
                "sdk-typescript:build",
                "sdk-python:build",
                "sdk-go:build",
                "sdk-ruby:build"
            ]
        },
        "test:all": {
            "dependsOn": [
                "sdk-typescript:test",
                "sdk-python:test",
                "sdk-go:test",
                "sdk-ruby:test",
                "app-typescript:test",
                "app-python:test",
                "app-go:test"
            ]
        },
        "docs:all": {
            "dependsOn": [
                "sdk-typescript:docs:build",
                "sdk-python:docs:build",
                "sdk-ruby:docs:build"
            ]
        },
        "docs:publish:preview": {
            "executor": "nx:run-commands",
            "options": {
                "commands": ["nx run infra:preview"]
            },
            "dependsOn": ["docs:all"]
        },
        "docs:publish": {
            "executor": "nx:run-commands",
            "options": {
                "commands": ["nx run infra:deploy"]
            },
            "dependsOn": ["docs:all"]
        },
        "run:all": {
            "dependsOn": [
                "app-typescript:run",
                "app-python:run",
                "app-go:run",
                "app-ruby:run"
            ]
        },
        "publish:all": {
            "dependsOn": [
                "sdk-typescript:publish",
                "sdk-python:publish",
                "sdk-go:publish",
                "sdk-ruby:publish"
            ]
        },
        "rebuild:all": {
            "dependsOn": ["build:all", "docs:all", "run:all"]
        },
        "release:create-branch": {
            "executor": "nx:run-commands",
            "options": {
                "commands": [
                    "node ./create-release-branch.js $VERSION_FROM $VERSION_TO"
                ],
                "env": {
                    "VERSION_FROM": "0.5.0",
                    "VERSION_TO": "0.6.0"
                }
            }
        }
    }
}
